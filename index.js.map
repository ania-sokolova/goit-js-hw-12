{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"48848365-f4e25352a2e58b0aa69d4606d\";\nconst baseUrl = \"https://pixabay.com/api/\";\nconst perPage = 40; \n\nexport async function fetchImages(query, page) {\n  const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&per_page=${perPage}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n}\n\nexport async function fetchImagesNoPaging(query) {\n    const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo`;\n  \n    try {\n      const response = await axios.get(url);\n      return response.data.hits; \n    } catch (error) {\n      console.error(\"Error fetching images:\", error);\n      throw error; \n    }\n  }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderImages(images, clearGallery = false) {\n  const gallery = document.querySelector(\".gallery\");\n\n  if (clearGallery) {\n    gallery.innerHTML = \"\"; \n  }\n\n  const galleryMarkup = images\n    .map(\n      ({ previewURL, largeImageURL, tags }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\"\n                 src=\"${previewURL}\"\n                 data-source=\"${largeImageURL}\"\n                 alt=\"${tags}\" />\n          </a>\n        </li>`\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".search-form\");\nconst searchInput = form.querySelector(\"input[name='text']\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst endMessage = document.querySelector(\".end-notification\");\nconst loader = document.getElementById(\"loader\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalHits = 0;\n\n\nasync function loadImages(query, page) {\n  try {\n    loader.classList.remove(\"hidden-loader\"); \n\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n\n    renderImages(data.hits, page === 1); \n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"No images found. Try another search!\",\n        position: \"topRight\",\n      });\n      loadMoreButton.classList.add(\"hidden\");\n      return;\n    }\n\n    if (page * 40 < totalHits) {\n      loadMoreButton.classList.remove(\"hidden\");\n      endMessage.classList.add(\"hidden\");\n    } else {\n      loadMoreButton.classList.add(\"hidden\");\n      endMessage.classList.remove(\"hidden\");\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }\n\n    smoothScroll(); \n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Failed to fetch images. Please try again!\",\n      position: \"topRight\",\n    });\n  } finally {\n    loader.classList.add(\"hidden-loader\"); \n  }\n}\n\n\nfunction smoothScroll() {\n  const galleryItems = document.querySelectorAll(\".gallery-item\");\n  if (galleryItems.length > 0) {\n    const { height } = galleryItems[0].getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n\n\nform.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  const query = searchInput.value.trim();\n\n  if (query === \"\") {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Please enter a search query!\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0;\n  loadMoreButton.classList.add(\"hidden\");\n  endMessage.classList.add(\"hidden\");\n\n  loadImages(currentQuery, currentPage);\n});\n\nloadMoreButton.addEventListener(\"click\", () => {\n  currentPage += 1;\n  loadImages(currentQuery, currentPage);\n});\n\n"],"names":["apiKey","baseUrl","perPage","fetchImages","query","page","url","axios","error","lightbox","renderImages","images","clearGallery","gallery","galleryMarkup","previewURL","largeImageURL","tags","SimpleLightbox","form","searchInput","loadMoreButton","endMessage","loader","currentPage","currentQuery","totalHits","loadImages","data","iziToast","smoothScroll","galleryItems","height","evt"],"mappings":"owBAEA,MAAMA,EAAS,qCACTC,EAAU,2BACVC,EAAU,GAET,eAAeC,EAAYC,EAAOC,EAAM,CAC7C,MAAMC,EAAM,GAAGL,CAAO,QAAQD,CAAM,MAAM,mBAAmBI,CAAK,CAAC,8BAA8BF,CAAO,SAASG,CAAI,GAErH,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCbA,IAAIC,EAEG,SAASC,EAAaC,EAAQC,EAAe,GAAO,CACzD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE7CD,IACFC,EAAQ,UAAY,IAGtB,MAAMC,EAAgBH,EACnB,IACC,CAAC,CAAE,WAAAI,EAAY,cAAAC,EAAe,KAAAC,CAAM,IAClC;AAAA,0CACkCD,CAAa;AAAA;AAAA,wBAE/BD,CAAU;AAAA,gCACFC,CAAa;AAAA,wBACrBC,CAAI;AAAA;AAAA,cAGvB,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaC,CAAa,EAEhDL,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIS,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,CAI1F,CC5BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAcD,EAAK,cAAc,oBAAoB,EACrDE,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAS,SAAS,eAAe,QAAQ,EAE/C,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAGhB,eAAeC,EAAWvB,EAAOC,EAAM,CACrC,GAAI,CACFkB,EAAO,UAAU,OAAO,eAAe,EAEvC,MAAMK,EAAO,MAAMzB,EAAYC,EAAOC,CAAI,EAK1C,GAJAqB,EAAYE,EAAK,UAEjBlB,EAAakB,EAAK,KAAMvB,IAAS,CAAC,EAE9BuB,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uCACT,SAAU,UAClB,CAAO,EACDR,EAAe,UAAU,IAAI,QAAQ,EACrC,MACD,CAEGhB,EAAO,GAAKqB,GACdL,EAAe,UAAU,OAAO,QAAQ,EACxCC,EAAW,UAAU,IAAI,QAAQ,IAEjCD,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAW,UAAU,OAAO,QAAQ,EACpCO,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,GAGHC,GACD,MAAe,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,EAAO,UAAU,IAAI,eAAe,CACrC,CACH,CAGA,SAASO,GAAe,CACtB,MAAMC,EAAe,SAAS,iBAAiB,eAAe,EAC9D,GAAIA,EAAa,OAAS,EAAG,CAC3B,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAa,CAAC,EAAE,sBAAqB,EACxD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAChB,CAAK,CACF,CACH,CAGAb,EAAK,iBAAiB,SAAWc,GAAQ,CACvCA,EAAI,eAAc,EAClB,MAAM7B,EAAQgB,EAAY,MAAM,KAAI,EAEpC,GAAIhB,IAAU,GAAI,CAChByB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,+BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDJ,EAAerB,EACfoB,EAAc,EACdE,EAAY,EACZL,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAW,UAAU,IAAI,QAAQ,EAEjCK,EAAWF,EAAcD,CAAW,CACtC,CAAC,EAEDH,EAAe,iBAAiB,QAAS,IAAM,CAC7CG,GAAe,EACfG,EAAWF,EAAcD,CAAW,CACtC,CAAC"}