{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"48848365-f4e25352a2e58b0aa69d4606d\";\nconst baseUrl = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n  const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&per_page=${perPage}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(images, isNewSearch) {\n  const gallery = document.querySelector(\".gallery\");\n\n  if (isNewSearch) {\n    gallery.innerHTML = \"\";\n  }\n\n  const galleryMarkup = images\n    .map(\n      ({ previewURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\"\n                 src=\"${previewURL}\"\n                 data-source=\"${largeImageURL}\"\n                 alt=\"${tags}\" />\n          </a>\n          <div class=\"image-info\">\n            <table>\n              <thead>\n                <tr>\n                  <th>Likes</th>\n                  <th>Views</th>\n                  <th>Comments</th>\n                  <th>Downloads</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td>${likes}</td>\n                  <td>${views}</td>\n                  <td>${comments}</td>\n                  <td>${downloads}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </li>`\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup);\n\n  new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".search-form\");\nconst searchInput = form.querySelector(\"input[name='text']\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst endMessage = document.querySelector(\".end-notification\");\nconst loader = document.getElementById(\"loader\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nconst perPage = 40; \nlet totalHits = 0; \n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  loadMoreButton.classList.add(\"hidden\");\n  endMessage.classList.add(\"hidden\");\n});\n\nasync function loadImages(query, page) {\n  try {\n    loader.classList.remove(\"hidden-loader\"); \n\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n\n    if (page === 1) {\n      renderImages(data.hits, true); \n    } else {\n      renderImages(data.hits, false);\n    }\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"No images found. Try another search!\",\n        position: \"topRight\",\n      });\n      loadMoreButton.classList.add(\"hidden\");\n      endMessage.classList.add(\"hidden\");\n      return;\n    }\n\n   \n    if (page * perPage < totalHits) {\n      loadMoreButton.classList.remove(\"hidden\");\n      endMessage.classList.add(\"hidden\");\n    } else {\n      loadMoreButton.classList.add(\"hidden\");\n      endMessage.classList.remove(\"hidden\");\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }\n\n    if (page > 1) {\n      smoothScroll(); \n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Failed to fetch images. Please try again!\",\n      position: \"topRight\",\n    });\n  } finally {\n    loader.classList.add(\"hidden-loader\"); \n  }\n}\n\nfunction smoothScroll() {\n  const galleryItems = document.querySelectorAll(\".gallery-item\");\n  if (galleryItems.length > 0) {\n    const { height } = galleryItems[0].getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n\n\nform.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  const query = searchInput.value.trim();\n\n  if (query === \"\") {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Please enter a search query!\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0;\n  loadMoreButton.classList.add(\"hidden\");\n  endMessage.classList.add(\"hidden\");\n\n  loadImages(currentQuery, currentPage);\n});\n\n\nloadMoreButton.addEventListener(\"click\", () => {\n  currentPage += 1;\n  loadImages(currentQuery, currentPage);\n});\n"],"names":["apiKey","baseUrl","fetchImages","query","page","perPage","url","axios","error","renderImages","images","isNewSearch","gallery","galleryMarkup","previewURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","searchInput","loadMoreButton","endMessage","loader","currentPage","currentQuery","totalHits","loadImages","data","iziToast","smoothScroll","galleryItems","height","evt"],"mappings":"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"}